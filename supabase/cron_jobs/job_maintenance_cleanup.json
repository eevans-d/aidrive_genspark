{"cron_job_id": 8, "cron_expression": "0 4 * * 0", "edge_function_name": "cron-jobs-maxiconsumo", "cron_job_name": "maintenance_cleanup", "description": "Job semanal de mantenimiento para retenci√≥n de logs y limpieza operativa", "parameters": {"job_type": "maintenance_cleanup", "retention_days": 30, "vacuum_tables": true, "clean_execution_logs": true}, "raw_sql": "\n            CREATE OR REPLACE PROCEDURE maintenance_cleanup_7b3e9d1f()\n            LANGUAGE plpgsql\n            AS $$\n            BEGIN\n            PERFORM net.http_post(\n            url:='https://dqaygmjpzoqjjrywdsxi.supabase.co/functions/v1/cron-jobs-maxiconsumo',\n            headers:=jsonb_build_object('Content-Type', 'application/json', 'Authorization', 'Bearer ' || (SELECT decrypted_secret FROM vault.decrypted_secrets WHERE name = 'service_role_key')),\n            body:=jsonb_build_object(\n                'action', 'execute',\n                'job_id', 'maintenance_cleanup',\n                'parameters', jsonb_build_object(\n                    'retention_days', 30,\n                    'vacuum_tables', true,\n                    'clean_execution_logs', true\n                )\n            ),\n            timeout_milliseconds:=120000\n            );\n            COMMIT;\n            END;\n            $$;\n\n            SELECT cron.schedule('maintenance_cleanup', '0 4 * * 0', 'CALL maintenance_cleanup_7b3e9d1f()');\n            "}
