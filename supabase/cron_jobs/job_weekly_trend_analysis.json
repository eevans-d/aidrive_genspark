{"cron_job_id": 6, "cron_expression": "0 3 * * 0", "edge_function_name": "cron-jobs-maxiconsumo", "cron_job_name": "weekly_trend_analysis", "description": "Job semanal de an√°lisis de tendencias de precios los domingos a las 03:00 AM", "parameters": {"job_type": "weekly_trend_analysis", "analysis_period": "weekly", "ml_predictions": true, "seasonal_patterns": true, "generate_reports": true, "batch_size": 500, "max_rows": 50000}, "raw_sql": "\n            CREATE OR REPLACE PROCEDURE weekly_trend_analysis_3d8e5f7c()\n            LANGUAGE plpgsql\n            AS $$\n            BEGIN\n            PERFORM net.http_post(\n            url:='https://dqaygmjpzoqjjrywdsxi.supabase.co/functions/v1/cron-jobs-maxiconsumo',\n            headers:=jsonb_build_object('Content-Type', 'application/json', 'Authorization', 'Bearer ' || (SELECT decrypted_secret FROM vault.decrypted_secrets WHERE name = 'service_role_key')),\n            body:=jsonb_build_object(\n                'action', 'execute',\n                'job_id', 'weekly_trend_analysis',\n                'parameters', jsonb_build_object(\n                    'analysis_period', 'weekly',\n                    'ml_predictions', true,\n                    'seasonal_patterns', true,\n                    'generate_reports', true,\n                    'batch_size', 500,\n                    'max_rows', 50000\n                )\n            ),\n            timeout_milliseconds:=600000\n            );\n            COMMIT;\n            END;\n            $$;\n\n            SELECT cron.schedule('weekly_trend_analysis', '0 3 * * 0', 'CALL weekly_trend_analysis_3d8e5f7c()');\n            "}
