
[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/home/eevan/ProyectosIA/aidrive_genspark[39m

 [32mâœ“[39m tests/unit/response-fail-signature.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 72[2mms[22m[39m
 [32mâœ“[39m tests/unit/scraper-cookie-jar.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 224[2mms[22m[39m
[90mstdout[2m | tests/unit/scraper-storage-auth.test.ts[2m > [22m[2mstorage key separation runtime[2m > [22m[2musa readKey para lecturas y writeKey para inserciones/actualizaciones
[22m[39m{"ts":"2026-01-16T05:27:39.188Z","level":"info","scope":"scraper-maxiconsumo:storage","message":"BATCH_INSERT_SUCCESS","requestId":"rw-1","count":1}

[90mstdout[2m | tests/unit/scraper-storage-auth.test.ts[2m > [22m[2mstorage key separation runtime[2m > [22m[2musa readKey para lecturas y writeKey para inserciones/actualizaciones
[22m[39m{"ts":"2026-01-16T05:27:39.320Z","level":"info","scope":"scraper-maxiconsumo:storage","message":"BATCH_UPDATE_COMPLETE","requestId":"rw-1","count":1}

[90mstdout[2m | tests/unit/scraper-storage-auth.test.ts[2m > [22m[2mstorage key separation runtime[2m > [22m[2musa writeKey tambiÃ©n para lecturas cuando readKey=service (modo service)
[22m[39m{"ts":"2026-01-16T05:27:39.347Z","level":"info","scope":"scraper-maxiconsumo:storage","message":"BATCH_INSERT_SUCCESS","requestId":"rw-2","count":1}

 [32mâœ“[39m tests/unit/scraper-storage-auth.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 207[2mms[22m[39m
 [32mâœ“[39m tests/unit/scraper-config.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 56[2mms[22m[39m
 [32mâœ“[39m tests/unit/scraper-parsing-edge-cases.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m tests/unit/api-minimarket-gateway.test.ts [2m([22m[2m46 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mâœ“[39m tests/unit/api-proveedor-read-mode.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m tests/unit/api-proveedor-routing.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m tests/unit/scraper-parsing.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstdout[2m | tests/unit/scraper-matching.test.ts[2m > [22m[2mscraper-maxiconsumo/matching[2m > [22m[2mperformAdvancedMatching[2m > [22m[2momite coincidencias con confianza <= 20
[22m[39m{"ts":"2026-01-16T05:27:40.354Z","level":"info","scope":"scraper-maxiconsumo:matching","message":"MATCHING_COMPLETE","total":0}

[90mstdout[2m | tests/unit/scraper-matching.test.ts[2m > [22m[2mscraper-maxiconsumo/matching[2m > [22m[2mperformAdvancedMatching[2m > [22m[2mhace match por nombre normalizado cuando no hay SKU ni barcode
[22m[39m{"ts":"2026-01-16T05:27:40.361Z","level":"info","scope":"scraper-maxiconsumo:matching","message":"MATCHING_COMPLETE","total":1}

 [32mâœ“[39m tests/unit/scraper-matching.test.ts [2m([22m[2m31 tests[22m[2m)[22m[32m 53[2mms[22m[39m
 [32mâœ“[39m tests/unit/scraper-cache.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m tests/unit/api-proveedor-auth.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m tests/unit/cron-jobs.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m tests/unit/scraper-alertas.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m

[2m Test Files [22m [1m[32m14 passed[39m[22m[90m (14)[39m
[2m      Tests [22m [1m[32m285 passed[39m[22m[90m (285)[39m
[2m   Start at [22m 05:27:38
[2m   Duration [22m 2.81s[2m (transform 1.42s, setup 0ms, import 2.25s, tests 870ms, environment 6ms)[22m

JUNIT report written to /home/eevan/ProyectosIA/aidrive_genspark/test-reports/junit.xml
